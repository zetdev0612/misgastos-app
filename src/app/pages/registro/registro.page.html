<ion-content fullscreen class="registro-page">
  <main class="container" role="main">
    <section class="card" aria-labelledby="title-reg">

      <!-- Left: branding/info -->
      <aside class="left" aria-hidden="false">
        <div class="brand">
          <div class="logo">MG</div>
          <h3>MisGastos</h3>
        </div>
        <p>Organiza tus finanzas personales de manera simple. Registra tus gastos y analiza tus h치bitos desde cualquier dispositivo.</p>

        <div class="promo" aria-hidden="true">游늵 Visualiza tus gastos con claridad</div>
      </aside>

      <!-- Right: registration form -->
      <div class="right" aria-labelledby="title-reg">
        <h2 id="title-reg">Crear cuenta</h2>
        <p class="sub">Reg칤strate para comenzar a controlar tus gastos</p>

        <form [formGroup]="registroForm" (ngSubmit)="onSubmit()" novalidate>
          <div class="input-group" title="Nombre completo">
            <div class="icon"><ion-icon name="person-outline"></ion-icon></div>
            <input type="text" formControlName="nombreCompleto" placeholder="Nombre completo" aria-label="Nombre completo" required [disabled]="isSubmitting" />
          </div>
          <ion-text color="danger" *ngIf="registroForm.get('nombreCompleto')?.invalid && registroForm.get('nombreCompleto')?.touched">
            <small class="error-text">M칤nimo 3 caracteres</small>
          </ion-text>

          <div class="input-group" title="Correo electr칩nico">
            <div class="icon"><ion-icon name="mail-outline"></ion-icon></div>
            <input type="email" formControlName="email" placeholder="Correo electr칩nico" aria-label="Correo electr칩nico" required [disabled]="isSubmitting" />
          </div>
          <ion-text color="danger" *ngIf="registroForm.get('email')?.invalid && registroForm.get('email')?.touched">
            <small class="error-text">Email inv치lido</small>
          </ion-text>

          <div class="input-group" title="Contrase침a">
            <div class="icon"><ion-icon name="lock-closed-outline"></ion-icon></div>
            <input [type]="showPassword ? 'text' : 'password'" formControlName="password" placeholder="Contrase침a" aria-label="Contrase침a" required [disabled]="isSubmitting" />
            <button type="button" class="icon-btn" (click)="togglePassword('password')" [disabled]="isSubmitting">
              <ion-icon [name]="showPassword ? 'eye-off-outline' : 'eye-outline'"></ion-icon>
            </button>
          </div>
          <ion-text color="danger" *ngIf="registroForm.get('password')?.invalid && registroForm.get('password')?.touched">
            <small class="error-text">M칤nimo 6 caracteres</small>
          </ion-text>

          <div class="input-group" title="Confirmar contrase침a">
            <div class="icon"><ion-icon name="lock-closed-outline"></ion-icon></div>
            <input [type]="showConfirmPassword ? 'text' : 'password'" formControlName="confirmarPassword" placeholder="Confirmar contrase침a" aria-label="Confirmar contrase침a" required [disabled]="isSubmitting" />
            <button type="button" class="icon-btn" (click)="togglePassword('confirm')" [disabled]="isSubmitting">
              <ion-icon [name]="showConfirmPassword ? 'eye-off-outline' : 'eye-outline'"></ion-icon>
            </button>
          </div>
          <ion-text color="danger" *ngIf="registroForm.get('confirmarPassword')?.hasError('passwordMismatch') && registroForm.get('confirmarPassword')?.touched">
            <small class="error-text">Las contrase침as no coinciden</small>
          </ion-text>

          <div class="row-between">
            <label style="display:flex;align-items:center;gap:8px;font-size:0.95rem;color:#475569;">
              <ion-checkbox slot="start" formControlName="aceptaTerminos" [disabled]="isSubmitting"></ion-checkbox>
              <span>Acepto t칠rminos</span>
            </label>
            <button type="button" class="link-btn" (click)="volverAlLogin()" [disabled]="isSubmitting">쯏a tienes cuenta?</button>
          </div>

          <button type="submit" class="btn" [disabled]="isSubmitting || !registroForm.valid">Registrarse</button>

          <div class="small">Al registrarte aceptas nuestras pol칤ticas.</div>
        </form>
      </div>
    </section>
  </main>
</ion-content>
